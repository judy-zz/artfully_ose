- in_section :events
- content_for :header do
  %h1= t('.heading', :default => "Events")

.row
  .span3
    =render :partial=>'menu'
  .span9
    = render "shared/error_messages", :target => @event

    = form_for( @event.default_chart, :html => { :class => 'form-horizontal' } ) do |f|
      %fieldset
        %legend Ticket Types

        - f.fields_for :sections do |builder|
          = render 'section_fields', :f => builder

        .control-group
          .controls
            %i.icon-plus-sign.icon-gray
            = link_to_add_fields 'Add another ticket type', f, :sections
          
      .form-actions
        = f.submit "Save", :class => 'btn'
    

:javascript
  function remove_fields(link) {
    $(link).prev("input[type=hidden]").val("1");
    $(link).closest(".fields").hide();
  }

  function add_fields(link, association, content) {
    var new_id = new Date().getTime();
    var regexp = new RegExp("new_" + association, "g")
    $(link).parents('.control-group').before(content.replace(regexp, new_id));
  }

