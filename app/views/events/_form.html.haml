= form_for event, :html => { :multipart => true } do |form|

  %legend Event
  .hr
  %fieldset
    %ul
      %li
        .label=form.label :name, "Name*"
        .element= form.text_field :name
      %li
        .label= form.label :producer, "Producer*"
        .element
          = form.text_field :producer
      %li
        .label= form.label :venue, "Description"
        .element
          = form.text_area :description, :rows => 6
          .description This will be displayed to patrons when purchasing tickets
      %li
        .label= form.label :contact_email, "Contact email"
        .element
          = form.text_field :contact_email
      %li
        .label= form.label :contact_phone, "Contact phone"
        .element
          = form.text_field :contact_phone
          .description Contact phone and email will be displayed to patrons and included in confirmation emails
      %li
        .label=  form.label :show_special_instructions, "Show special instructions"
        .element= form.check_box( :show_special_instructions, {}, "true", "false" )
      %li
        .label= form.label :special_instructions_caption, "Special instructions caption"
        .element
          = form.text_field :special_instructions_caption
          .description This will be displayed above the special instructions field during checkout
      %li
        .label= form.label :image 
        .element
          = form.file_field :image

      - if event.new_record?
        - if can? :create, :paid_events
          %li
            .label=  form.label :is_free, "This is a free event"
            .element= form.check_box( :is_free, {}, "true", "false" )
        - else
          %li
            .label=  form.label :is_free, "This is a free event"
            .element= form.check_box( :is_free, {:disabled => 'disabled', :checked => 'checked'}, "true", "false" )
  %legend Venue
  .hr
  = form.fields_for :venue, event.venue do |venue_form| 
    %fieldset
      %ul
        %li
          .label= venue_form.label :name, "Name*"
          .element= venue_form.text_field :name    
        %li
          .label= venue_form.label :address1, "Address Line 1"
          .element= venue_form.text_field :address1
        %li
          .label= venue_form.label :address2, "Address Line 2"
          .element= venue_form.text_field :address2
        %li
          .label= venue_form.label :city, "City*"
          .element= venue_form.text_field :city
        %li
          .label= venue_form.label :state, "State / Province*"
          .element= venue_form.select(:state, options_for_select(sorted_us_state_names, event.venue.state))
        %li
          .label= venue_form.label :zip, "Zip / Postal Code"
          .element= venue_form.text_field :zip
        %li
          .label= venue_form.label :time_zone, "Time Zone*"
          .element= venue_form.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones, :default => current_user.current_organization.time_zone

  - if templates.present?
    %legend Seat Charts
    .hr
    %fieldset
      %ul
        - templates.each do |template|
          %li
            .label= label_tag "charts[]", template.name
            .element= check_box_tag "charts[]", template.id

  = form.submit

