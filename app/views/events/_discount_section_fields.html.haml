.fields.section-fields
  .control-group
    =f.label :section_id, "Ticket Type", :class => 'control-label'
    .controls
      :ruby
        # this should probably go in a helper
        sections = @event.charts.collect(&:sections).flatten.uniq
        sections_options = sections.map {|s| content_tag('option', s.name, {:value => s.id.to_s, 'data-price' => (s.price / 100.0)}) }

      = f.select :section_id, sections_options.join('').html_safe, {}, :class => 'section-select'

  .control-group
    =f.label :price, "Discounted price", :class => 'control-label'
    .controls
      .input-prepend
        %span.add-on $
        =f.text_field :price, :placeholder => '0.00', :class => 'input-small section-price'#, :value => number_as_cents(f.object.price, :format => "%n")
      (regularly <span class="regular-price">#{number_to_currency(sections.first.price)}</span>)

  .control-group
    .controls
      %label.radio
        = f.radio_button :unlimited_capacity, true, :checked => true
        Unlimited discounted tickets
      %label.radio
        = f.radio_button :unlimited_capacity, false
        Only #{f.text_field :limit, :class => 'span1', :placeholder => 10} tickets can be sold at this discount
      
      - show_remove_links = true if show_remove_links.nil?
      - if show_remove_links
        %span.remove-fields-link
          = f.hidden_field :_destroy
          %i.icon-minus-sign.icon-gray
          = link_to_remove_fields "remove ticket", f