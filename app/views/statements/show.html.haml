- in_section :reports
- content_for :header do
  %h1= t(".heading", :default => "Statement Reports")
  %h2= t(".subheading", :default => "View statements for your shows")

.context
  %h3 Shows
  = render :partial => "played_shows", :locals => { :event => @event, :played => @played }
.document
  -if @statement.nil?
    %p
      Please select a show or a date range
  -else
    %h3="Statement Report: #{@event.name}"
    %h4 Revenue
    #statement_table
      %table.standalone
        %thead
          %tr
            %th{:style=>'width:200px'} Shows
            %th{:style=>'width:100px'} Tickets Sold
            %th{:style=>'width:100px'} Comps
            %th{:style=>'width:100px'} Potential
            %th{:style=>'width:100px'} Gross Revenue
            %th{:style=>'width:100px'} Net Revenue
        %tbody
          - @statement.sales.performances.each do |row|
            %tr
              %td=l row.datetime, :format => :long_with_day
              %td=row.tickets_sold
              %td=row.tickets_comped
              %td=number_as_cents row.potential_revenue
              %td
                %strong=number_as_cents row.gross_revenue
              %td=number_as_cents row.net_revenue
    %h4 Expenses
    #statement_table
      %table.standalone
        %thead
          %tr
            %th{:style=>'width:200px'}
            %th{:style=>'width:100px'} Units
            %th{:style=>'width:100px'} Rate
            %th{:style=>'width:100px'}
            %th{:style=>'width:100px'} Expense
            %th{:style=>'width:100px'}
        %tbody
          - @statement.expenses.expenses.each do |row|
            - if row.description == 'Credit card processing'
              %tr
                %td=row.description
                %td=number_as_cents row.units
                %td=row.rate
                %td
                %td=number_as_cents row.expense
                %td
